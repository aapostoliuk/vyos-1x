### generated by accel_pptp.py ###
[modules]
log_syslog
pptp
shaper
{# Common authentication backend definitions #}
{% include 'accel-ppp/config_modules_auth_mode.j2' %}
ippool
{# Common authentication protocols (pap, chap ...) #}
{% for protocol in authentication.require %}
{#   this should be fixed in the CLI by a migrator #}
{%     if protocol == 'chap' %}
auth_chap_md5
{%     elif protocol == 'mschap' %}
auth_mschap_v1
{%     else %}
auth_{{ protocol.replace('-', '_') }}
{%     endif %}
{% endfor %}

[core]
thread-count={{ thread_count }}

[common]
{% if max_concurrent_sessions is vyos_defined %}
max-starting={{ max_concurrent_sessions }}
{% endif %}

[log]
syslog=accel-pptp,daemon
copy=1
level=5

{# Common DNS name-server definition #}
{% include 'accel-ppp/config_name_server.j2' %}

{% if wins_server is vyos_defined %}
[wins]
{%     for server in wins_server %}
wins{{ loop.index }}={{ server }}
{%     endfor %}
{% endif %}


[pptp]
ifname=pptp%d
{% if outside_address is vyos_defined %}
bind={{ outside_address }}
{% endif %}
verbose=1
ppp-max-mtu={{ mtu }}
mppe={{ authentication.mppe }}
echo-interval=10
echo-failure=3
{% if default_pool is vyos_defined %}
ip-pool={{ default_pool }}
{% endif %}

[client-ip-range]
0.0.0.0/0

{# Common IP pool definitions #}
{% include 'accel-ppp/config_ip_pool.j2' %}

[ppp]
verbose=5
check-ip=1
single-session=replace

{# Common chap-secrets and RADIUS server/option definitions #}
{% include 'accel-ppp/config_chap_secrets_radius.j2' %}

{# Common RADIUS shaper configuration #}
{% include 'accel-ppp/config_shaper_radius.j2' %}

[cli]
tcp=127.0.0.1:2003

